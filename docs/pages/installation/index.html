<!DOCTYPE html><html lang=en> <head><meta charset=utf-8><title>Installation :: vbl</title><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=robots content=all><link href=https://vbl.vorakl.com/pages/installation/ rel=canonical><meta name=description content="Several ways to install the library"><!--[if lt IE 9]>
    <script src="https://vbl.vorakl.com/theme/html5.js?v=1575459630"></script>
    <![endif]--><link rel=stylesheet href="https://vbl.vorakl.com/theme/bootstrap-pygments.bundle.min.css?v=1575459630"><link rel="shortcut icon" href="/favicon.ico?v=1575459630"><meta name=apple-mobile-web-app-title content=vbl><meta name=application-name content=vbl></head> <body> <div class=navbar> <div class=navbar-inner> <div class=container> <a href=https://vbl.vorakl.com/ class=brand>vbl</a> <a class="btn btn-navbar" data-toggle=collapse data-target=.nav-collapse> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </a> <div class=nav-collapse> <ul class="nav pull-right"> <!-- <li class="divider-vertical"></li> --> <li><a href=/pages/modules/ >modules</a></li> <li><a href=https://github.com/vorakl/vbl>repo</a></li> <li><a href=https://vorakl.com/ >blog</a></li> <li><a href=https://vorakl.com/about/ >author</a></li> <!-- <li class="divider-vertical"></li> --> </ul> </div> </div> </div> </div> <div class=container> <div class=content> <div class=row> <div class=span12> <div class=article> <div class=content-title> <h2>Installation</h2> <div class="well small">Several ways to install the library</div> </div> <div><ul class=simple> <li><a class="reference internal" href=#general-information>General information</a></li> <li><a class="reference internal" href=#download-a-module-at-run-time-using-curl>Download a module at run-time using curl</a></li> <li><a class="reference internal" href=#download-a-module-by-curl-and-check-an-integrity-by-sha256sum>Download a module by curl and check an integrity by sha256sum</a></li> <li><a class="reference internal" href=#download-a-module-using-a-pure-bash-without-saving-on-a-disk>Download a module using a pure Bash without saving on a disk</a></li> </ul> <div class=section id=general-information> <h2>General information</h2> <p>In general, the installation process looks as follows:</p> <ol class=arabic> <li><dl class="first docutils"> <dt>Download the <tt class="docutils literal">latest</tt>, <tt class="docutils literal">stable</tt>, or a version of a module from the library.</dt> <dd><p class=first>The URL of a module's file should be constructed of three parts:</p> <ul class=simple> <li><strong>The base URL</strong>. It is <tt class="docutils literal"><span class=pre>http://vbl.vorakl.com/</span></tt> (https is also supported)</li> <li><strong>The version</strong>. A version can be <tt class="docutils literal">latest/</tt>, <tt class="docutils literal">stable/</tt> or one of published versions (e.g. <tt class="docutils literal">v2.0.3/</tt>)</li> <li><strong>The name of a module</strong> (e.g. <tt class="docutils literal">sys</tt>)</li> </ul> <p>For example:</p> <ul class=simple> <li><tt class="docutils literal"><span class=pre>http://vbl.vorakl.com/latest/sys</span></tt></li> <li><tt class="docutils literal"><span class=pre>http://vbl.vorakl.com/stable/exec</span></tt></li> <li><tt class="docutils literal"><span class=pre>http://vbl.vorakl.com/v2.0.3/str</span></tt></li> </ul> <p>In addition, each module comes with a sha256 hash (<tt class="docutils literal"><span class=pre>${module}.sha256</span></tt>). For example, these all are possible URLs of sha256 hashes:</p> <ul class="last simple"> <li><tt class="docutils literal"><span class=pre>http://vbl.vorakl.com/latest/exec.sha256</span></tt></li> <li><tt class="docutils literal"><span class=pre>http://vbl.vorakl.com/v2.0.2/sys.sha256</span></tt></li> </ul> </dd> </dl> </li> <li><dl class="first docutils"> <dt>Include it into your script.</dt> <dd><p class="first last">Usually, external files with Bash code are included by <tt class="docutils literal">source /path/to/file</tt> or <tt class="docutils literal">. /path/to/file</tt> instuctions.</p> </dd> </dl> </li> </ol> <p>There are a few common ways to do these two steps.</p> <div class=line-block> <div class=line><br></div> </div> </div> <div class=section id=download-a-module-at-run-time-using-curl> <h2>Download a module at run-time using curl</h2> <p>This code downloads the latest version of the <tt class="docutils literal">sys</tt> module and doesn't save it localy:</p> <div class=highlight><pre><span></span><span class=nb>source</span> &lt;<span class=o>(</span>curl -sSLf http://vbl.vorakl.com/latest/sys<span class=o>)</span>
</pre></div> <div class=line-block> <div class=line><br></div> </div> </div> <div class=section id=download-a-module-by-curl-and-check-an-integrity-by-sha256sum> <h2>Download a module by curl and check an integrity by sha256sum</h2> <p>This snippet uses two external commands (<tt class="docutils literal">curl</tt> and <tt class="docutils literal">sha256sum</tt>) to download a module (a version can be also specified), checks its sha256 hash and keeps everything in memory, without saving a file on a disk. If everything is fine, then the module will be included. Otherwise, the script exits with an error message. To simplify things, it's represented as a separate function <tt class="docutils literal">import_lib</tt>:</p> <div class=highlight><pre><span></span><span class=c1># usage: import_lib lib_name [version]</span>
import_lib<span class=o>()</span> <span class=o>{</span>
    <span class=nb>local</span> _lib_name _ver _lib_content _lib_hash _origlib_hash

    <span class=nv>_lib_name</span><span class=o>=</span><span class=s2>&quot;</span><span class=si>${</span><span class=nv>1</span><span class=p>?The lib name is empty</span><span class=si>}</span><span class=s2>&quot;</span>
    <span class=o>[[</span> -n <span class=s2>&quot;</span><span class=nv>$2</span><span class=s2>&quot;</span> <span class=o>]]</span> <span class=o>&amp;&amp;</span> <span class=nv>_ver</span><span class=o>=</span><span class=s2>&quot;</span><span class=nv>$2</span><span class=s2>/&quot;</span> <span class=o>||</span> <span class=nv>_ver</span><span class=o>=</span><span class=s2>&quot;latest/&quot;</span>
    <span class=nv>_lib_content</span><span class=o>=</span><span class=s2>&quot;</span><span class=k>$(</span>curl -sSLf http://vbl.vorakl.com/<span class=si>${</span><span class=nv>_ver</span><span class=si>}${</span><span class=nv>_lib_name</span><span class=si>}</span><span class=k>)</span><span class=s2>&quot;</span>
    <span class=nv>_lib_hash</span><span class=o>=</span><span class=s2>&quot;</span><span class=k>$(</span><span class=nb>set</span> -- <span class=k>$(</span>sha256sum &lt;<span class=o>(</span><span class=nb>echo</span> <span class=s2>&quot;</span><span class=si>${</span><span class=nv>_lib_content</span><span class=si>}</span><span class=s2>&quot;</span><span class=k>)</span> <span class=k>)</span><span class=s2>; echo &quot;</span><span class=nv>$1</span><span class=s2>&quot;)&quot;</span>
    <span class=nv>_origlib_hash</span><span class=o>=</span><span class=s2>&quot;</span><span class=k>$(</span><span class=nb>set</span> -- <span class=k>$(</span>curl -sSLf http://vbl.vorakl.com/<span class=si>${</span><span class=nv>_ver</span><span class=si>}${</span><span class=nv>_lib_name</span><span class=si>}</span>.sha256<span class=k>)</span><span class=p>;</span> <span class=nb>echo</span> <span class=s2>&quot;</span><span class=nv>$1</span><span class=s2>&quot;</span><span class=k>)</span><span class=s2>&quot;</span>
    <span class=k>if</span> <span class=o>[[</span> <span class=s2>&quot;</span><span class=si>${</span><span class=nv>_lib_hash</span><span class=si>}</span><span class=s2>&quot;</span> <span class=o>==</span> <span class=s2>&quot;</span><span class=si>${</span><span class=nv>_origlib_hash</span><span class=si>}</span><span class=s2>&quot;</span> <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
        <span class=nb>source</span> &lt;<span class=o>(</span><span class=nb>echo</span> <span class=s2>&quot;</span><span class=si>${</span><span class=nv>_lib_content</span><span class=si>}</span><span class=s2>&quot;</span><span class=o>)</span>
    <span class=k>else</span>
        <span class=nb>echo</span> <span class=s2>&quot;The &#39;</span><span class=si>${</span><span class=nv>_ver</span><span class=si>}${</span><span class=nv>_lib_name</span><span class=si>}</span><span class=s2>&#39; module hasn&#39;t been loaded&quot;</span> &gt;<span class=p>&amp;</span><span class=m>2</span>
        <span class=nb>exit</span> <span class=m>1</span>
    <span class=k>fi</span>
<span class=o>}</span>
</pre></div> <p>This is how it can be used in code:</p> <div class=highlight><pre><span></span><span class=ch>#!/bin/bash</span>

start<span class=o>()</span> <span class=o>{</span>
    import_lib sys
    <span class=c1># import_lib sys stable</span>

    <span class=c1># add your code here</span>
<span class=o>}</span>

import_lib<span class=o>()</span> <span class=o>{</span>
    <span class=nb>local</span> _lib_name _ver _lib_content _lib_hash _origlib_hash

    <span class=nv>_lib_name</span><span class=o>=</span><span class=s2>&quot;</span><span class=si>${</span><span class=nv>1</span><span class=p>?The lib name is empty</span><span class=si>}</span><span class=s2>&quot;</span>
    <span class=o>[[</span> -n <span class=s2>&quot;</span><span class=nv>$2</span><span class=s2>&quot;</span> <span class=o>]]</span> <span class=o>&amp;&amp;</span> <span class=nv>_ver</span><span class=o>=</span><span class=s2>&quot;</span><span class=nv>$2</span><span class=s2>/&quot;</span> <span class=o>||</span> <span class=nv>_ver</span><span class=o>=</span><span class=s2>&quot;latest/&quot;</span>
    <span class=nv>_lib_content</span><span class=o>=</span><span class=s2>&quot;</span><span class=k>$(</span>curl -sSLf http://vbl.vorakl.com/<span class=si>${</span><span class=nv>_ver</span><span class=si>}${</span><span class=nv>_lib_name</span><span class=si>}</span><span class=k>)</span><span class=s2>&quot;</span>
    <span class=nv>_lib_hash</span><span class=o>=</span><span class=s2>&quot;</span><span class=k>$(</span><span class=nb>set</span> -- <span class=k>$(</span>sha256sum &lt;<span class=o>(</span><span class=nb>echo</span> <span class=s2>&quot;</span><span class=si>${</span><span class=nv>_lib_content</span><span class=si>}</span><span class=s2>&quot;</span><span class=k>)</span> <span class=k>)</span><span class=s2>; echo &quot;</span><span class=nv>$1</span><span class=s2>&quot;)&quot;</span>
    <span class=nv>_origlib_hash</span><span class=o>=</span><span class=s2>&quot;</span><span class=k>$(</span><span class=nb>set</span> -- <span class=k>$(</span>curl -sSLf http://vbl.vorakl.com/<span class=si>${</span><span class=nv>_ver</span><span class=si>}${</span><span class=nv>_lib_name</span><span class=si>}</span>.sha256<span class=k>)</span><span class=p>;</span> <span class=nb>echo</span> <span class=s2>&quot;</span><span class=nv>$1</span><span class=s2>&quot;</span><span class=k>)</span><span class=s2>&quot;</span>
    <span class=k>if</span> <span class=o>[[</span> <span class=s2>&quot;</span><span class=si>${</span><span class=nv>_lib_hash</span><span class=si>}</span><span class=s2>&quot;</span> <span class=o>==</span> <span class=s2>&quot;</span><span class=si>${</span><span class=nv>_origlib_hash</span><span class=si>}</span><span class=s2>&quot;</span> <span class=o>]]</span><span class=p>;</span> <span class=k>then</span>
        <span class=nb>source</span> &lt;<span class=o>(</span><span class=nb>echo</span> <span class=s2>&quot;</span><span class=si>${</span><span class=nv>_lib_content</span><span class=si>}</span><span class=s2>&quot;</span><span class=o>)</span>
    <span class=k>else</span>
        <span class=nb>echo</span> <span class=s2>&quot;The &#39;</span><span class=si>${</span><span class=nv>_ver</span><span class=si>}${</span><span class=nv>_lib_name</span><span class=si>}</span><span class=s2>&#39; module hasn&#39;t been loaded&quot;</span> &gt;<span class=p>&amp;</span><span class=m>2</span>
        <span class=nb>exit</span> <span class=m>1</span>
    <span class=k>fi</span>
<span class=o>}</span>

start <span class=s2>&quot;</span><span class=nv>$@</span><span class=s2>&quot;</span>
</pre></div> <div class=line-block> <div class=line><br></div> </div> </div> <div class=section id=download-a-module-using-a-pure-bash-without-saving-on-a-disk> <h2>Download a module using a pure Bash without saving on a disk</h2> <p>This one is quite tricky. For downloading a module it doesn't use any external tools, such as <tt class="docutils literal">curl</tt> or <tt class="docutils literal">wget</tt>, just a pure Bash code. It also doesn't store a file on a disk:</p> <div class=highlight><pre><span></span><span class=nv>lib_name</span><span class=o>=</span><span class=s2>&quot;latest/sys&quot;</span>
<span class=nb>source</span> &lt;<span class=o>(</span>
    <span class=nb>exec</span> <span class=m>3</span>&lt;&gt;/dev/tcp/vbl.vorakl.com/80
    <span class=nb>printf</span> <span class=s2>&quot;GET /</span><span class=si>${</span><span class=nv>lib_name</span><span class=si>}</span><span class=s2> HTTP/1.1\nHost: vbl.vorakl.com\nConnection: close\n\n&quot;</span> &gt;<span class=p>&amp;</span><span class=m>3</span>
    <span class=nv>body</span><span class=o>=</span><span class=m>0</span><span class=p>;</span>
    <span class=k>while</span> <span class=nv>IFS</span><span class=o>=</span> <span class=nb>read</span> -u <span class=m>3</span> -r str<span class=p>;</span> <span class=k>do</span>
        <span class=k>if</span> <span class=o>((</span> body <span class=o>))</span><span class=p>;</span> <span class=k>then</span>
            <span class=nb>printf</span> <span class=s2>&quot;%s\n&quot;</span> <span class=s2>&quot;</span><span class=si>${</span><span class=nv>str</span><span class=si>}</span><span class=s2>&quot;</span>
        <span class=k>else</span>
            <span class=o>[[</span> -z <span class=s2>&quot;</span><span class=si>${</span><span class=nv>str</span><span class=p>%</span><span class=s1>$&#39;\r&#39;</span><span class=si>}</span><span class=s2>&quot;</span> <span class=o>]]</span> <span class=o>&amp;&amp;</span> <span class=nv>body</span><span class=o>=</span><span class=m>1</span>
        <span class=k>fi</span>
    <span class=k>done</span>
    <span class=nb>exec</span> <span class=m>3</span>&gt;<span class=p>&amp;</span>-
<span class=o>)</span>
</pre></div> <p>or in a shorter form, as a one-liner:</p> <div class=highlight><pre><span></span><span class=nv>lib_name</span><span class=o>=</span><span class=s2>&quot;latest/sys&quot;</span><span class=p>;</span> <span class=nb>source</span> &lt;<span class=o>(</span><span class=nb>exec</span> <span class=m>3</span>&lt;&gt;/dev/tcp/vbl.vorakl.com/80<span class=p>;</span> <span class=nb>printf</span> <span class=s2>&quot;GET /</span><span class=si>${</span><span class=nv>lib_name</span><span class=si>}</span><span class=s2> HTTP/1.1\nHost: vbl.vorakl.com\nConnection: close\n\n&quot;</span> &gt;<span class=p>&amp;</span><span class=m>3</span><span class=p>;</span> <span class=nv>body</span><span class=o>=</span><span class=m>0</span><span class=p>;</span> <span class=k>while</span> <span class=nv>IFS</span><span class=o>=</span> <span class=nb>read</span> -u <span class=m>3</span> -r str<span class=p>;</span> <span class=k>do</span> <span class=k>if</span> <span class=o>((</span> body <span class=o>))</span><span class=p>;</span> <span class=k>then</span> <span class=nb>printf</span> <span class=s2>&quot;%s\n&quot;</span> <span class=s2>&quot;</span><span class=si>${</span><span class=nv>str</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>;</span> <span class=k>else</span> <span class=o>[[</span> -z <span class=s2>&quot;</span><span class=si>${</span><span class=nv>str</span><span class=p>%</span><span class=s1>$&#39;\r&#39;</span><span class=si>}</span><span class=s2>&quot;</span> <span class=o>]]</span> <span class=o>&amp;&amp;</span> <span class=nv>body</span><span class=o>=</span><span class=m>1</span><span class=p>;</span> <span class=k>fi</span> <span class=k>done</span><span class=p>;</span> <span class=nb>exec</span> <span class=m>3</span>&gt;<span class=p>&amp;</span>-<span class=o>)</span>
</pre></div> <p>This is the example of how the snippet can be used in code:</p> <div class=highlight><pre><span></span><span class=ch>#!/bin/bash</span>

start<span class=o>()</span> <span class=o>{</span>
    <span class=nv>lib_name</span><span class=o>=</span><span class=s2>&quot;latest/sys&quot;</span>
    <span class=nb>source</span> &lt;<span class=o>(</span><span class=nb>exec</span> <span class=m>3</span>&lt;&gt;/dev/tcp/vbl.vorakl.com/80<span class=p>;</span> <span class=nb>printf</span> <span class=s2>&quot;GET /</span><span class=si>${</span><span class=nv>lib_name</span><span class=si>}</span><span class=s2> HTTP/1.1\nHost: vbl.vorakl.com\nConnection: close\n\n&quot;</span> &gt;<span class=p>&amp;</span><span class=m>3</span><span class=p>;</span> <span class=nv>body</span><span class=o>=</span><span class=m>0</span><span class=p>;</span> <span class=k>while</span> <span class=nv>IFS</span><span class=o>=</span> <span class=nb>read</span> -u <span class=m>3</span> -r str<span class=p>;</span> <span class=k>do</span> <span class=k>if</span> <span class=o>((</span> body <span class=o>))</span><span class=p>;</span> <span class=k>then</span> <span class=nb>printf</span> <span class=s2>&quot;%s\n&quot;</span> <span class=s2>&quot;</span><span class=si>${</span><span class=nv>str</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>;</span> <span class=k>else</span> <span class=o>[[</span> -z <span class=s2>&quot;</span><span class=si>${</span><span class=nv>str</span><span class=p>%</span><span class=s1>$&#39;\r&#39;</span><span class=si>}</span><span class=s2>&quot;</span> <span class=o>]]</span> <span class=o>&amp;&amp;</span> <span class=nv>body</span><span class=o>=</span><span class=m>1</span><span class=p>;</span> <span class=k>fi</span> <span class=k>done</span><span class=p>;</span> <span class=nb>exec</span> <span class=m>3</span>&gt;<span class=p>&amp;</span>-<span class=o>)</span>
<span class=o>}</span>

start <span class=s2>&quot;</span><span class=nv>$@</span><span class=s2>&quot;</span>
</pre></div> </div> </div> </div> </div> </div> </div> <footer> <div class=container> <div class=row> <div class=span5> <span class=pull-left> &copy; 2020 <a href=https://vorakl.com/contacts/ >vorakl</a> All Rights Reserved </span> </div> <div class=span7> <div class=pull-right> Powered by <a href=https://github.com/getpelican/pelican>Pelican</a> and <a href=https://github.com/vorakl/aves>Aves</a> theme </div> </div> </div> </div> </footer> </div> <script src="https://vbl.vorakl.com/theme/jquery-bootstrap-collapse.bundle.min.js?v=1575459630"></script> </body> </html>