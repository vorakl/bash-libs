<!DOCTYPE html><html lang=en> <head><meta charset=utf-8><title>Configuration :: Vorakl's Libs: Bash</title><meta name=viewport content="width=device-width, initial-scale=1.0"><meta name=robots content=all><link href=https://vbl.vorakl.com/pages/configuration/ rel=canonical><meta name=description content="Changing default values of functions' options"><!--[if lt IE 9]>
    <script src="https://vbl.vorakl.com/theme/html5.js?v=1575459626"></script>
    <![endif]--><link rel=stylesheet href="https://vbl.vorakl.com/theme/bootstrap-pygments.bundle.min.css?v=1575459626"><link rel="shortcut icon" href="/favicon.ico?v=1575459626"><meta name=apple-mobile-web-app-title content="Vorakl's Libs: Bash"><meta name=application-name content="Vorakl's Libs: Bash"></head> <body> <div class=navbar> <div class=navbar-inner> <div class=container> <a href=https://vbl.vorakl.com/ class=brand>Vorakl's Libs: Bash</a> <a class="btn btn-navbar" data-toggle=collapse data-target=.nav-collapse> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </a> <div class=nav-collapse> <ul class="nav pull-right"> <!-- <li class="divider-vertical"></li> --> <li><a href=https://github.com/vorakl/vbl>repo</a></li> <li><a href=https://libs.cf/ >libs</a></li> <li><a href=https://vorakl.com/ >blog</a></li> <li><a href=https://vorakl.com/about/ >author</a></li> <!-- <li class="divider-vertical"></li> --> </ul> </div> </div> </div> </div> <div class=container> <div class=content> <div class=row> <div class=span9> <div class=article> <div class=content-title> <h1>Configuration</h1> <h3>Changing default values of functions' options</h3> </div> <div><div class=section id=general-information> <h2>General information</h2> <p>Many functions in modules can be reconfigured at run-time by changing values of their options. All mutable options can be found in the documentation. This allows us to use the same code everywhere and change a function's behavior (e.g. messages format, exit codes) for particular needs. It's possible to do either at global scope by setting them once in the beginning of a script or in-line to modify a certain call.</p> <div class=line-block> <div class=line><br></div> </div> </div> <div class=section id=how-it-works> <h2>How it works</h2> <p>It works as follows. Every module has an entrypoint, a function which is called like <tt class="docutils literal"><span class=pre>__${module}_main__</span></tt>. It's executed automaticaly when a module is included. In the next step, <tt class="docutils literal"><span class=pre>__${module}_conf__</span></tt> is executed which runs all available <tt class="docutils literal"><span class=pre>__${func}_conf__</span></tt> functions for setting default values. Then, <tt class="docutils literal"><span class=pre>__${module}_main__</span></tt> checks if the <tt class="docutils literal"><span class=pre>__${module}_init__</span></tt> function has been previosly defined (in a script which includes a module). If so, it's also executed. This is exactly the function where all needed options should be redefined.</p> <div class=line-block> <div class=line><br></div> </div> </div> <div class=section id=example> <h2>Example</h2> <div class=highlight><pre><span></span><span class=ch>#!/bin/bash</span>

start<span class=o>()</span> <span class=o>{</span>
    <span class=nb>source</span> &lt;<span class=o>(</span>curl -sSLf http://vbl.vorakl.com/stable/sys<span class=o>)</span>
    <span class=nb>source</span> &lt;<span class=o>(</span>curl -sSLf http://vbl.vorakl.com/stable/str<span class=o>)</span>

    str_say <span class=s2>&quot;Booting...&quot;</span>
    str_err <span class=s2>&quot;Something went wrong!&quot;</span>
<span class=o>}</span>

__str_init__<span class=o>()</span> <span class=o>{</span>
    <span class=nv>STR_SAY_FORMAT</span><span class=o>=</span><span class=s2>&quot;INFO: %s\n&quot;</span>
    <span class=nv>STR_ERR_FORMAT</span><span class=o>=</span><span class=s2>&quot;ERROR: %s\n&quot;</span>
<span class=o>}</span>

start
</pre></div> </div> </div> </div> <div class=article> <p>Share on <a href="https://twitter.com/intent/tweet?text=Configuration:%20Changing%20default%20values%20of%20functions%27%20options&url=https://vbl.vorakl.com/pages/configuration/">Twitter</a></p> </div> </div> <div class=span3> <div class=well style="padding: 8px 0; background-color: #FBFBFB;"> <ul class="nav nav-list"> <li class=nav-header> Modules </li> <li><a href=/pages/sys/ >sys</a></li> <li><a href=/pages/str/ >str</a></li> <li><a href=/pages/exec/ >exec</a></li> <li><a href=/pages/matrix/ >matrix</a></li> </ul> </div> </div> </div> </div> <footer> <div class=container> <div class=row> <div class=span5> <span class=pull-left> &copy; 2020 <a href=https://vorakl.com/contacts/ >Oleksii Tsvietnov</a> All Rights Reserved </span> </div> <div class=span7> <div class=pull-right> Powered by <a href=https://github.com/getpelican/pelican>Pelican</a> and <a href=https://aves.cf/ >Aves</a> theme </div> </div> </div> </div> </footer> </div> <script src="https://vbl.vorakl.com/theme/jquery-bootstrap-collapse.bundle.min.js?v=1575459626"></script> </body> </html>